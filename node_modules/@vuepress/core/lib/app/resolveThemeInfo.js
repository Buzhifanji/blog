"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.resolveThemeInfo = void 0;
const resolvePluginsFromConfig_1 = require("./resolvePluginsFromConfig");
const resolveTheme_1 = require("./resolveTheme");
const resolveThemeLayouts_1 = require("./resolveThemeLayouts");
/**
 * Resolve theme info and its parent theme info
 */
const resolveThemeInfo = (app, themeName) => {
    // resolve current theme info
    const theme = (0, resolveTheme_1.resolveTheme)(app, themeName);
    const themeInfo = {
        layouts: (0, resolveThemeLayouts_1.resolveThemeLayouts)(theme.layouts),
        plugins: [...(0, resolvePluginsFromConfig_1.resolvePluginsFromConfig)(app, theme.plugins), theme],
    };
    // return if current theme does not have a parent theme
    if (!theme.extends) {
        return themeInfo;
    }
    // resolve parent theme info recursively
    const parentThemeInfo = (0, exports.resolveThemeInfo)(app, theme.extends);
    return {
        layouts: { ...parentThemeInfo.layouts, ...themeInfo.layouts },
        plugins: [...parentThemeInfo.plugins, ...themeInfo.plugins],
    };
};
exports.resolveThemeInfo = resolveThemeInfo;
