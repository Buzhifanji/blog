---
title: 判断字符串括号是否合法
date: 2022-03-04 17:01:57
permalink: /pages/7796ac/
categories:
  - leetcode
  - 栈
tags:
  - 算法
---

<iframe :src="$withBase('/markmap/data-structure/stack/stack.html')" width="100%" height="400" frameborder="0" scrolling="No" leftmargin="0" topmargin="0"></iframe>

## 判断字符串括号是否合法
</br>

<Badge text="【题目】"/>字符串中只有字符'('和')'。合法字符串需要括号可以配对。比如

输入："()"

输出：true

<Badge type="warning" text="【解释】"/>：()，()()，(())是合法的。)(，()(，(()是非法的。

### 规律

（1）每个左括号'('或者右括号')'都完成**配对**，才是合法的。

（2）配对可以通过**消除法**来消掉合法的括号，如果最后没有任何字符了，那么就是合法字符串。

（3）奇数长度的字符串总是非法的。

### 边界

- 字符串为空

- 字符串只有 1 个或者奇数个

- 字符串是"(((())))"嵌套很多层的是否可以处理

### JS代码实现

```js
function isValid(s) {
  // 处理边界
  if (!s) {
    return false;
  }
  const len = s.length;
  if (len % 2 === 1) {
    // 长度为奇数，不可能是一个有效的合法字符
    return false;
  }
  // 消除法的主要核心逻辑:
  const stack = [];
  const isEmpty = () => stack.length === 0;
  for (let i = 0; i < len; i++) {
    const item = s[i];
    if (item === "(") {
      // 入栈
      stack.push(item);
    } else if (item === ")") {
      if (isEmpty()) {
        // 出栈失败
        return false;
      }
      // 出栈
      stack.pop();
    }
  }

  return isEmpty();
}

// test
console.log(isValid("()()(())"));
console.log(isValid("()()(()"));
```
