---
title: array-range
date: 2022-03-28 11:10:45
permalink: /pages/f1874a/
categories:
  - npm
  - 数组
tags:
  - npm
  - 数组
---
:::theorem array-range
数组去重
::: right
来自 [github](https://github.com/mattdesl/array-range)
:::

## 用例

```javascript
var range = require('array-range')
range(3)       // -> [ 0, 1, 2 ]
range(1, 4)    // -> [ 1, 2, 3 ]
```

array-range 如果是一个参数n，则表示截取索引0到n，返回一个新的数组；如果是两个参数:a, b, 则表示，截取索引a到b，返回一个新的数组。它们都不会改变原来的数组。

## 源码

```javascript
function newArray(start, end) {
  // 这里很巧妙，只关注参数是否为number类型
  var n0 = typeof start === 'number',
      n1 = typeof end === 'number'

  // 只接受了一个参数
  if (n0 && !n1) {
      end = start
      start = 0
  } else if (!n0 && !n1) {
    // 两个参数都没有，或者两个参数都不是number类型
      start = 0
      end = 0
  }
  // 再次进行异常处理 start|0 表示，如果start 为false，则取0，否则取start
  start = start|0
  end = end|0
  
  // 处理end 小于 start 的情况
  var len = end-start
  if (len<0)
      throw new Error('array length must be positive')
  
  // 从start 遍历到 end，把数组里的元素复制到数组a中
  var a = new Array(len)
  for (var i=0, c=start; i<len; i++, c++)
      a[i] = c
  return a
}
```

## 测试

array-range 采用测试库是[ tape ](https://github.com/substack/tape)

## 总结

array-range 的用途是：再指定范围内截取数组。

arrary-range 的实现：处理参数，然后遍历循环，而处理参数是占据了大部分工作。

arrary-range 与实现了[ slice ](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/slice)大部分功能。