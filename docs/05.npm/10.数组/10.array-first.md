---
title: array-first
date: 2022-03-24 14:01:39
permalink: /pages/1e44d8/
categories:
  - npm
  - 数组
tags:
  - 
---

:::theorem array-first
获取数组的第一个元素或开始的第n个元素
::: right
来自 [github](https://github.com/jonschlinkert/array-first)
:::

## 用例

获取数组的第一个元素

```javascript
var first = require('array-first');

first(['a', 'b', 'c', 'd', 'e', 'f']);
//=> 'a'
```
获取数组开始的第n个元素

```javascript
var first = require('array-first');

// 取一个
first(['a', 'b', 'c', 'd', 'e', 'f'], 1);
//=> 'a'

// 取3个
first(['a', 'b', 'c', 'd', 'e', 'f'], 3);
//=> ['a', 'b', 'c']
```
array-first 接受两个参数，第一个参数是数组，第二个参数是可选，表示获取的个数。返回一个数组。

## 源码

array-first 依赖两个包：[is-number](../60.数学/5.is-number.md)、[array-slice](30.array-slice.md)


我们来看看代码实现：

```javascript
var isNumber = require('is-number');
var slice = require('array-slice');

module.exports = function arrayFirst(arr, num) {
  // 判断第一个参数是否为数组
  if (!Array.isArray(arr)) {
    throw new Error('array-first expects an array as the first argument.');
  }
  // 如果数组为空，直接返回null
  if (arr.length === 0) {
    return null;
  }
  // 这里 作者引入 is-number包是2.1.0版本，截至目前为止是7.0.0
  // 所以这里 处理会存在一些判断 ，目前来看是没有必要的，但当时情景与现在是不一样的

  // 如果 num 是number，则 取 +md，反之取 1
  // 然后 通过 slice 截取arr数组
  var first = slice(arr, 0, isNumber(num) ? +num : 1);
  // +num === 1, 则返回 first[0],否则返回截取的结果
  if (+num === 1 || num == null) {
    return first[0];
  }
  
  return first;
};
```
## 测试

array-first 采用测试库是[ mocha ](https://github.com/mochajs/mocha)

array-first 一共写了三个测试用例，先是测试异常用例，然后是正常用例，代码如下：

```javascript
var should = require('should');
var first = require('./');

describe('first', function() {
  it('should throw an error if the value passed is not an array:', function() {
    (function() {
      first();
    }).should.throw('array-first expects an array as the first argument.');
  });

  it('should return the first element in the array:', function() {
    first(['a', 'b', 'c', 'd', 'e', 'f']).should.eql('a');
    first(['a', 'b', 'c', 'd', 'e', 'f'], 1).should.eql('a');
  });

  it('should the first n elements of the array:', function() {
    first(['a', 'b', 'c', 'd', 'e', 'f'], 3).should.eql(['a', 'b', 'c']);
  });
});
```
这里 可以看出 作者没有写 空数组的测试用例

## 总结

array-first 的用途：获取数组的第一个元素或开始的第n个元素。

array-first 函数的实现一共分为四步

1. 处理第一个必填参数的异常情况
2. 处理空数组情况
3. 处理从0到n截取数组
4. 处理返回值，如果是num不是数值，则取第一个做为数组元素返回

先处理异常，然后才整理处理内容。
