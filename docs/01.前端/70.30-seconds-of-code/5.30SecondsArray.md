---
title: 30SecondsArray
date: 2022-04-03 19:36:53
permalink: /pages/14d237/
author: 
  name: 30-seconds
  link: https://github.com/30-seconds/30-seconds-of-code
categories:
  - 前端
  - 30-seconds-of-code
tags:
  - 工具函数
  - 数组
---

## all：布尔全等判断

```javascript
const all = (arr, fn = Boolean) => arr.every(fn);
```

```javascript
all([4, 2, 3], x => x > 1); // true
all([1, 2, 3]); // true
```

## allEqual：检查数组各项相等

```javascript
const allEqual = arr => arr.every(val => val === arr[0]);
```

```javascript
allEqual([1, 2, 3, 4, 5, 6]); // false
allEqual([1, 1, 1, 1]); // true
```

## allEqualBy：检查数组各项是否满足条件（四舍五入）

```javascript
const allEqualBy = (arr, fn) => {
  const eql = fn(arr[0]);
  return arr.every(val => fn(val) === eql);
};
```

```javascript
allEqualBy([1.1, 1.2, 1.3], Math.round); // true
allEqualBy([1.1, 1.3, 1.6], Math.round); // false
```
## allUnique：检查数组是否重复

```javascript
const allUnique = arr => arr.length === new Set(arr).size;
```

```javascript
allUnique([1, 2, 3, 4]); // true
allUnique([1, 1, 2, 3]); // false
```

## allUniqueBy：根据条件（四舍五入）检查数组是否重复

```javascript
const allUniqueBy = (arr, fn) => arr.length === new Set(arr.map(fn)).size;
```

```javascript
allUniqueBy([1.2, 2.4, 2.9], Math.round); // true
allUniqueBy([1.2, 2.3, 2.4], Math.round); // false
```

## someAny：检查数组是否要求

```javascript
const someAny = (arr, fn = Boolean) => arr.some(fn);
```

```javascript
someAny([0, 1, 2, 0], x => x >= 2); // true
someAny([0, 0, 1, 0]); // true

```
## aperture：分割数组，每份长度为n

```javascript
const aperture = (n, arr) =>
  n > arr.length
    ? []
    : arr.slice(n - 1).map((v, i) => arr.slice(i, i + n));
```

```javascript
aperture(2, [1, 2, 3, 4]); // [[1, 2], [2, 3], [3, 4]]
aperture(3, [1, 2, 3, 4]); // [[1, 2, 3], [2, 3, 4]]
aperture(5, [1, 2, 3, 4]); // []
```

## approximatelyEqual：约等于

```javascript
const approximatelyEqual = (v1, v2, epsilon = 0.001) =>
  Math.abs(v1 - v2) < epsilon;
```

```javascript
approximatelyEqual(Math.PI / 2.0, 1.5708); // true
```
## arithmeticProgression：等差数列

```javascript
const arithmeticProgression  = (n, lim) =>
  Array.from({ length: Math.ceil(lim / n) }, (_, i) => (i + 1) * n );
```

```javascript
arithmeticProgression(5, 25); // [5, 10, 15, 20, 25]
```

## arrayToCSV：数组转CSV格式（带空格的字符串）

```javascript
const arrayToCSV = (arr, delimiter = ',') =>
  arr
    .map(v =>
      v.map(x => (isNaN(x) ? `"${x.replace(/"/g, '""')}"` : x)).join(delimiter)
    )
    .join('\n');
```

```javascript
arrayToCSV([['a', 'b'], ['c', 'd']]); // '"a","b"\n"c","d"'
arrayToCSV([['a', 'b'], ['c', 'd']], ';'); // '"a";"b"\n"c";"d"'
arrayToCSV([['a', '"b" great'], ['c', 3.1415]]); // '"a","""b"" great"\n"c",3.1415'
```

## arrayToHTMLList：数组转li列表

此代码段将数组的元素转换为 li 标签，并将其附加到给定ID的列表中。

```javascript
const arrayToHTMLList = (arr, listID) =>
  document.querySelector(`#${listID}`).innerHTML += arr
    .map(item => `<li>${item}</li>`)
    .join('');
```

```javascript
arrayToHTMLList(['item 1', 'item 2'], 'myListID');
```

## average：平均数

```javascript
const average = (...nums) =>
  nums.reduce((acc, val) => acc + val, 0) / nums.length;
```

```javascript
average(...[1, 2, 3]); // 2
average(1, 2, 3); // 2
```

## averageBy：数组对象属性平均数

```javascript
const averageBy = (arr, fn) =>
  arr
    .map(typeof fn === 'function' ? fn : val => val[fn])
    .reduce((acc, val) => acc + val, 0) / arr.length;
```

```javascript
averageBy([{ n: 4 }, { n: 2 }, { n: 8 }, { n: 6 }], o => o.n); // 5
averageBy([{ n: 4 }, { n: 2 }, { n: 8 }, { n: 6 }], 'n'); // 5
```
